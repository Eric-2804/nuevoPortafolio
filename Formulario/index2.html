<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Formulario estilo macOS</title>

    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- SweetAlert2 -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

    <!-- Estilos macOS personalizados -->
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            background: #f0f2f5;
        }

        .macos-window {
            max-width: 950px;
            margin: 3rem auto;
            background: #fff;
            border-radius: 1rem;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        .macos-header {
            background: #f4f4f6;
            padding: 0.75rem 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .macos-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            display: inline-block;
        }

        .dot-red {
            background: #ff5f57;
        }

        .dot-yellow {
            background: #ffbd2e;
        }

        .dot-green {
            background: #28c840;
        }

        .macos-title {
            flex-grow: 1;
            text-align: center;
            font-weight: 500;
            color: #333;
        }

        .table-wrapper {
            overflow-x: auto;
        }
    </style>
</head>

<body>
    <div class="container">
        <!-- Ventana macOS del formulario -->
        <div class="macos-window mb-4">
            <div class="macos-header">
                <span class="macos-dot dot-red"></span>
                <span class="macos-dot dot-yellow"></span>
                <span class="macos-dot dot-green"></span>
                <span class="macos-title">Formulario de Registro</span>
            </div>
            <div class="p-4">
                <form id="registroForm" class="row g-3">
                    <div class="col-md-6">
                        <input type="text" class="form-control" placeholder="Nombres" id="nombres" />
                    </div>
                    <div class="col-md-6">
                        <input type="text" class="form-control" placeholder="Apellidos" id="apellidos" />
                    </div>
                    <div class="col-md-6">
                        <input type="tel" class="form-control" placeholder="Número de teléfono" id="telefono" />
                    </div>
                    <div class="col-md-6">
                        <select class="form-select" id="tipoDocumento">
                            <option disabled selected>Selecciona una opción...</option>
                            <option value="cc">Cédula de ciudadanía</option>
                            <option value="ti">Tarjeta de identidad</option>
                            <option value="ce">Cédula de extranjería</option>
                        </select>
                    </div>
                    <div class="col-md-6">
                        <input type="text" class="form-control" placeholder="Número de documento" id="documento" />
                    </div>
                    <div class="col-md-6">
                        <input type="email" class="form-control" placeholder="Correo electrónico" id="correo" />
                    </div>
                    <div class="col-md-6">
                        <input type="date" class="form-control" id="fechaNacimiento" />
                    </div>
                    <div class="col-12">
                        <label class="form-label fw-semibold">Género</label>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input" type="radio" name="genero" value="Masculino" />
                            <label class="form-check-label">Masculino</label>
                        </div>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input" type="radio" name="genero" value="Femenino" />
                            <label class="form-check-label">Femenino</label>
                        </div>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input" type="radio" name="genero" value="Otro" />
                            <label class="form-check-label">Otro</label>
                        </div>
                    </div>
                    <div class="col-12 text-center">
                        <button type="submit" class="btn btn-primary px-5" id="botonEnviar">ENVIAR</button>
                    </div>
                </form>
            </div>
        </div>

        <!-- Ventana macOS de la tabla -->
        <div class="macos-window">
            <div class="macos-header">
                <span class="macos-dot dot-red"></span>
                <span class="macos-dot dot-yellow"></span>
                <span class="macos-dot dot-green"></span>
                <span class="macos-title">Tabla de Registros</span>
            </div>
            <div class="p-3 table-wrapper">
                <table class="table table-bordered table-striped" id="tablaRegistros">
                    <thead class="table-dark">
                        <tr>
                            <th>Item</th>
                            <th>Nombres</th>
                            <th>Apellidos</th>
                            <th>Teléfono</th>
                            <th>Tipo Doc.</th>
                            <th>Documento</th>
                            <th>Correo</th>
                            <th>Fecha Nac.</th>
                            <th>Género</th>
                            <th>Acciones</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- Se llena por JS -->
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- Bootstrap Bundle -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Tu script JS aquí -->
    <script>
        const registros = [];
        const formulario = document.getElementById('registroForm');
        const tabla = document.getElementById('tablaRegistros').querySelector('tbody');
        const botonSubmit = document.getElementById('botonEnviar');
        let indiceEditando = -1;

        formulario.addEventListener('submit', function (e) {
            e.preventDefault();

            const nombres = document.getElementById('nombres').value.trim();
            if (!nombres) return mostrarAlerta("Por favor ingresa tus nombres");

            const apellidos = document.getElementById('apellidos').value.trim();
            if (!apellidos) return mostrarAlerta("Por favor ingresa tus apellidos");

            const telefono = document.getElementById('telefono').value.trim();
            if (!telefono) return mostrarAlerta("Por favor ingresa tu número de teléfono");

            const tipoDocumento = document.getElementById('tipoDocumento').value;
            if (!tipoDocumento || tipoDocumento === "Selecciona una opción...") {
                return mostrarAlerta("Selecciona un tipo de documento");
            }

            const documento = document.getElementById('documento').value.trim();
            if (!documento) return mostrarAlerta("Ingresa tu número de documento");

            const correo = document.getElementById('correo').value.trim();
            if (!correo) return mostrarAlerta("Ingresa tu correo electrónico");

            const fechaNacimiento = document.getElementById('fechaNacimiento').value;
            if (!fechaNacimiento) return mostrarAlerta("Selecciona tu fecha de nacimiento");

            const genero = document.querySelector('input[name="genero"]:checked')?.value;
            if (!genero) return mostrarAlerta("Selecciona tu género");

            const nuevoRegistro = {
                nombres,
                apellidos,
                telefono,
                tipoDocumento,
                documento,
                correo,
                fechaNacimiento,
                genero
            };

            if (indiceEditando === -1) {
                registros.push(nuevoRegistro);
                Swal.fire({ icon: 'success', title: 'Registro exitoso', confirmButtonColor: '#007aff' });
            } else {
                registros[indiceEditando] = nuevoRegistro;
                indiceEditando = -1;
                botonSubmit.textContent = 'ENVIAR';
                Swal.fire({ icon: 'success', title: 'Registro actualizado', confirmButtonColor: '#007aff' });
            }

            actualizarTabla();
            formulario.reset();
        });

        function mostrarAlerta(mensaje) {
            Swal.fire({ icon: 'warning', title: 'Campo requerido', text: mensaje, confirmButtonColor: '#007aff' });
        }

        function actualizarTabla() {
            tabla.innerHTML = "";

            registros.forEach((registro, index) => {
                const fila = document.createElement('tr');
                fila.innerHTML = `
          <td>${index + 1}</td>
          <td>${registro.nombres}</td>
          <td>${registro.apellidos}</td>
          <td>${registro.telefono}</td>
          <td>${registro.tipoDocumento}</td>
          <td>${registro.documento}</td>
          <td>${registro.correo}</td>
          <td>${registro.fechaNacimiento}</td>
          <td>${registro.genero}</td>
          <td>
            <button class="btn btn-sm btn-warning" onclick="editarRegistro(${index})">✏️</button>
            <button class="btn btn-sm btn-danger" onclick="confirmarEliminacion(${index})">❌</button>
          </td>`;
                tabla.appendChild(fila);
            });
        }

        function confirmarEliminacion(index) {
            Swal.fire({
                title: '¿Eliminar este registro?',
                icon: 'warning',
                showCancelButton: true,
                confirmButtonColor: '#d33',
                cancelButtonText: 'Cancelar',
                confirmButtonText: 'Eliminar'
            }).then((result) => {
                if (result.isConfirmed) eliminarRegistro(index);
            });
        }

        function eliminarRegistro(index) {
            registros.splice(index, 1);
            actualizarTabla();
            Swal.fire({ icon: 'success', title: 'Eliminado', confirmButtonColor: '#007aff' });
        }

        function editarRegistro(index) {
            const registro = registros[index];
            document.getElementById('nombres').value = registro.nombres;
            document.getElementById('apellidos').value = registro.apellidos;
            document.getElementById('telefono').value = registro.telefono;
            document.getElementById('tipoDocumento').value = registro.tipoDocumento;
            document.getElementById('documento').value = registro.documento;
            document.getElementById('correo').value = registro.correo;
            document.getElementById('fechaNacimiento').value = registro.fechaNacimiento;

            document.querySelectorAll('input[name="genero"]').forEach(input => {
                input.checked = input.value === registro.genero;
            });

            indiceEditando = index;
            botonSubmit.textContent = 'ACTUALIZAR';
            formulario.scrollIntoView({ behavior: 'smooth' });
        }
    </script>
</body>

</html>